define pipeline snot
args
  add = 42
pipeline
  define pipeline badger
  pipeline
    select args from in into out;
  end;

  create pipeline badger;

  select event from in into badger;
  select event from badger into out;
end;

create pipeline snot;

select event from in into snot;
select event from snot into out;

## inlined
scope add root
  create stream in;
  create stream out;
  create stream err;

  define pipeline badger
  pipeline
    select 42 from in into out;
  end;

  create stream snot-in;
  create stream snot-out;
  create pipeline badger;

  select event from sont-in into badger;
  select event from badger into snot-out;

  select event from in into snot-in;
  select event from snot-out into out;
scope end root


## inlined 2nd phase
scope add root
  create stream in;
  create stream out;
  create stream err;


  create stream snot-in;
  create stream snot-out;

  create stream badger-in;
  create stream badger-out;
  select 42 from badger-ini into badger-out;

  select event from sont-in into badger-in;
  select event from badger-out into snot-out;

  select event from in into snot-in;
  select event from snot-out into out;
scope end root